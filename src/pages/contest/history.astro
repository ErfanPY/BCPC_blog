---
import { BlogSchema } from "../../content/config";
import PostLayout from "../../layouts/PostLayout.astro";
import { Image } from "astro:assets";

// Define which PDFs exist for each contest
const existingPDFs = {
  1: ['A', 'B', 'C', 'D'],
  2: ['A', 'B', 'C', 'D', 'E'],
  3: ['A', 'B', 'C', 'D', 'E'],
  4: ['A', 'B', 'C', 'D'],
  5: ['A', 'B', 'C', 'D', 'E', 'F']
};

const post: BlogSchema = {
  title: "تاریخچه مسابقات",
  description: "تاریخچه مسابقات برنامه‌نویسی و سوالات و نتایج نهایی آنها",
  pubDate: "2025-04-12"
};

// Function to check if a PDF exists for a contest
function pdfExists(contestNumber, problemLetter) {
  return existingPDFs[contestNumber]?.includes(problemLetter) || false;
}

// Function to close modal when clicking outside
function closeModalOnClickOutside(e) {
  const modal = e.target.closest('.modal');
  if (modal && e.target === modal) {
    const checkboxId = modal.previousElementSibling.id;
    const checkbox = document.getElementById(checkboxId);
    if (checkbox) checkbox.checked = false;
  }
}
---

<PostLayout
  title={post.title}
  description={post.description}
  pubDate={post.pubDate}
>
  <article class="prose prose-lg lg:max-w-[750px] prose-img:mx-auto" dir="rtl">
    <section class="mb-8">
      <h2 class="text-3xl font-bold mb-4">مسابقه شماره 5</h2>
      <div class="grid grid-cols-2 gap-4">
        <button 
          onclick="window.location.href='/contest-history/pdf/contest-5/A.pdf'" 
          class={`btn btn-outline btn-sm ${pdfExists(5, 'A') ? 'hover:cursor-pointer' : 'btn-disabled'}`}
          disabled={!pdfExists(5, 'A')}
        >
          سوال A
        </button>
        <button 
          onclick="window.location.href='/contest-history/pdf/contest-5/B.pdf'" 
          class={`btn btn-outline btn-sm ${pdfExists(5, 'B') ? 'hover:cursor-pointer' : 'btn-disabled'}`}
          disabled={!pdfExists(5, 'B')}
        >
          سوال B
        </button>
        <button 
          onclick="window.location.href='/contest-history/pdf/contest-5/C.pdf'" 
          class={`btn btn-outline btn-sm ${pdfExists(5, 'C') ? 'hover:cursor-pointer' : 'btn-disabled'}`}
          disabled={!pdfExists(5, 'C')}
        >
          سوال C
        </button>
        <button 
          onclick="window.location.href='/contest-history/pdf/contest-5/D.pdf'" 
          class={`btn btn-outline btn-sm ${pdfExists(5, 'D') ? 'hover:cursor-pointer' : 'btn-disabled'}`}
          disabled={!pdfExists(5, 'D')}
        >
          سوال D
        </button>
        <button 
          onclick="window.location.href='/contest-history/pdf/contest-5/E.pdf'" 
          class={`btn btn-outline btn-sm ${pdfExists(5, 'E') ? 'hover:cursor-pointer' : 'btn-disabled'}`}
          disabled={!pdfExists(5, 'E')}
        >
          سوال E
        </button>
        <button 
          onclick="window.location.href='/contest-history/pdf/contest-5/F.pdf'" 
          class={`btn btn-outline btn-sm ${pdfExists(5, 'F') ? 'hover:cursor-pointer' : 'btn-disabled'}`}
          disabled={!pdfExists(5, 'F')}
        >
          سوال F
        </button>
      </div>
      <div class="flex justify-center mt-4">
        <label for="scoreboard-5" class="cursor-pointer">
          <Image
            src="/contest-history/images/5.png"
            alt="نتایج مسابقه شماره 5"
            width={400}
            height={300}
            class="rounded-lg hover:opacity-90 transition-opacity"
          />
        </label>
        <input type="checkbox" id="scoreboard-5" class="modal-toggle" />
        <div class="modal" onclick={closeModalOnClickOutside}>
          <div class="modal-box relative">
            <label for="scoreboard-5" class="btn btn-sm btn-circle absolute right-2 top-2">✕</label>
            <Image
              src="/contest-history/images/5.png"
              alt="نتایج مسابقه شماره 5"
              width={1200}
              height={900}
              class="rounded-lg"
            />
          </div>
        </div>
      </div>
    </section>

    <section class="mb-8">
      <h2 class="text-3xl font-bold mb-4">مسابقه شماره 4</h2>
      <div class="grid grid-cols-2 gap-4">
        <button 
          onclick="window.location.href='/contest-history/pdf/contest-4/A.pdf'" 
          class={`btn btn-outline btn-sm ${pdfExists(4, 'A') ? 'hover:cursor-pointer' : 'btn-disabled'}`}
          disabled={!pdfExists(4, 'A')}
        >
          سوال A
        </button>
        <button 
          onclick="window.location.href='/contest-history/pdf/contest-4/B.pdf'" 
          class={`btn btn-outline btn-sm ${pdfExists(4, 'B') ? 'hover:cursor-pointer' : 'btn-disabled'}`}
          disabled={!pdfExists(4, 'B')}
        >
          سوال B
        </button>
        <button 
          onclick="window.location.href='/contest-history/pdf/contest-4/C.pdf'" 
          class={`btn btn-outline btn-sm ${pdfExists(4, 'C') ? 'hover:cursor-pointer' : 'btn-disabled'}`}
          disabled={!pdfExists(4, 'C')}
        >
          سوال C
        </button>
        <button 
          onclick="window.location.href='/contest-history/pdf/contest-4/D.pdf'" 
          class={`btn btn-outline btn-sm ${pdfExists(4, 'D') ? 'hover:cursor-pointer' : 'btn-disabled'}`}
          disabled={!pdfExists(4, 'D')}
        >
          سوال D
        </button>
      </div>
      <div class="flex justify-center mt-4">
        <div class="text-base text-center text-gray-500">
          نتایج مسابقه در حال آماده‌سازی است
        </div>
      </div>
    </section>

    <section class="mb-8">
      <h2 class="text-3xl font-bold mb-4">مسابقه شماره 3</h2>
      <div class="grid grid-cols-2 gap-4">
        <button 
          onclick="window.location.href='/contest-history/pdf/contest-3/A.pdf'" 
          class={`btn btn-outline btn-sm ${pdfExists(3, 'A') ? 'hover:cursor-pointer' : 'btn-disabled'}`}
          disabled={!pdfExists(3, 'A')}
        >
          سوال A
        </button>
        <button 
          onclick="window.location.href='/contest-history/pdf/contest-3/B.pdf'" 
          class={`btn btn-outline btn-sm ${pdfExists(3, 'B') ? 'hover:cursor-pointer' : 'btn-disabled'}`}
          disabled={!pdfExists(3, 'B')}
        >
          سوال B
        </button>
        <button 
          onclick="window.location.href='/contest-history/pdf/contest-3/C.pdf'" 
          class={`btn btn-outline btn-sm ${pdfExists(3, 'C') ? 'hover:cursor-pointer' : 'btn-disabled'}`}
          disabled={!pdfExists(3, 'C')}
        >
          سوال C
        </button>
        <button 
          onclick="window.location.href='/contest-history/pdf/contest-3/D.pdf'" 
          class={`btn btn-outline btn-sm ${pdfExists(3, 'D') ? 'hover:cursor-pointer' : 'btn-disabled'}`}
          disabled={!pdfExists(3, 'D')}
        >
          سوال D
        </button>
        <button 
          onclick="window.location.href='/contest-history/pdf/contest-3/E.pdf'" 
          class={`btn btn-outline btn-sm ${pdfExists(3, 'E') ? 'hover:cursor-pointer' : 'btn-disabled'}`}
          disabled={!pdfExists(3, 'E')}
        >
          سوال E
        </button>
      </div>
      <div class="flex justify-center mt-4">
        <label for="scoreboard-3" class="cursor-pointer">
          <Image
            src="/contest-history/images/3.jpg"
            alt="نتایج مسابقه شماره 3"
            width={400}
            height={300}
            class="rounded-lg hover:opacity-90 transition-opacity"
          />
        </label>
        <input type="checkbox" id="scoreboard-3" class="modal-toggle" />
        <div class="modal" onclick={closeModalOnClickOutside}>
          <div class="modal-box relative">
            <label for="scoreboard-3" class="btn btn-sm btn-circle absolute right-2 top-2">✕</label>
            <Image
              src="/contest-history/images/3.jpg"
              alt="نتایج مسابقه شماره 3"
              width={1200}
              height={900}
              class="rounded-lg"
            />
          </div>
        </div>
      </div>
    </section>

    <section class="mb-8">
      <h2 class="text-3xl font-bold mb-4">مسابقه شماره 2</h2>
      <div class="grid grid-cols-2 gap-4">
        <button 
          onclick="window.location.href='/contest-history/pdf/contest-2/A.pdf'" 
          class={`btn btn-outline btn-sm ${pdfExists(2, 'A') ? 'hover:cursor-pointer' : 'btn-disabled'}`}
          disabled={!pdfExists(2, 'A')}
        >
          سوال A
        </button>
        <button 
          onclick="window.location.href='/contest-history/pdf/contest-2/B.pdf'" 
          class={`btn btn-outline btn-sm ${pdfExists(2, 'B') ? 'hover:cursor-pointer' : 'btn-disabled'}`}
          disabled={!pdfExists(2, 'B')}
        >
          سوال B
        </button>
        <button 
          onclick="window.location.href='/contest-history/pdf/contest-2/C.pdf'" 
          class={`btn btn-outline btn-sm ${pdfExists(2, 'C') ? 'hover:cursor-pointer' : 'btn-disabled'}`}
          disabled={!pdfExists(2, 'C')}
        >
          سوال C
        </button>
        <button 
          onclick="window.location.href='/contest-history/pdf/contest-2/D.pdf'" 
          class={`btn btn-outline btn-sm ${pdfExists(2, 'D') ? 'hover:cursor-pointer' : 'btn-disabled'}`}
          disabled={!pdfExists(2, 'D')}
        >
          سوال D
        </button>
        <button 
          onclick="window.location.href='/contest-history/pdf/contest-2/E.pdf'" 
          class={`btn btn-outline btn-sm ${pdfExists(2, 'E') ? 'hover:cursor-pointer' : 'btn-disabled'}`}
          disabled={!pdfExists(2, 'E')}
        >
          سوال E
        </button>
      </div>
      <div class="flex justify-center mt-4">
        <label for="scoreboard-2" class="cursor-pointer">
          <Image
            src="/contest-history/images/2.png"
            alt="نتایج مسابقه شماره 2"
            width={400}
            height={300}
            class="rounded-lg hover:opacity-90 transition-opacity"
          />
        </label>
        <input type="checkbox" id="scoreboard-2" class="modal-toggle" />
        <div class="modal" onclick={closeModalOnClickOutside}>
          <div class="modal-box relative">
            <label for="scoreboard-2" class="btn btn-sm btn-circle absolute right-2 top-2">✕</label>
            <Image
              src="/contest-history/images/2.png"
              alt="نتایج مسابقه شماره 2"
              width={1200}
              height={900}
              class="rounded-lg"
            />
          </div>
        </div>
      </div>
    </section>

    <section class="mb-8">
      <h2 class="text-3xl font-bold mb-4">مسابقه شماره 1</h2>
      <div class="grid grid-cols-2 gap-4">
        <button 
          onclick="window.location.href='/contest-history/pdf/contest-1/A.pdf'" 
          class={`btn btn-outline btn-sm ${pdfExists(1, 'A') ? 'hover:cursor-pointer' : 'btn-disabled'}`}
          disabled={!pdfExists(1, 'A')}
        >
          سوال A
        </button>
        <button 
          onclick="window.location.href='/contest-history/pdf/contest-1/B.pdf'" 
          class={`btn btn-outline btn-sm ${pdfExists(1, 'B') ? 'hover:cursor-pointer' : 'btn-disabled'}`}
          disabled={!pdfExists(1, 'B')}
        >
          سوال B
        </button>
        <button 
          onclick="window.location.href='/contest-history/pdf/contest-1/C.pdf'" 
          class={`btn btn-outline btn-sm ${pdfExists(1, 'C') ? 'hover:cursor-pointer' : 'btn-disabled'}`}
          disabled={!pdfExists(1, 'C')}
        >
          سوال C
        </button>
        <button 
          onclick="window.location.href='/contest-history/pdf/contest-1/D.pdf'" 
          class={`btn btn-outline btn-sm ${pdfExists(1, 'D') ? 'hover:cursor-pointer' : 'btn-disabled'}`}
          disabled={!pdfExists(1, 'D')}
        >
          سوال D
        </button>
      </div>
      <div class="flex justify-center mt-4">
        <label for="scoreboard-1" class="cursor-pointer">
          <Image
            src="/contest-history/images/1.jpg"
            alt="نتایج مسابقه شماره 1"
            width={400}
            height={300}
            class="rounded-lg hover:opacity-90 transition-opacity"
          />
        </label>
        <input type="checkbox" id="scoreboard-1" class="modal-toggle" />
        <div class="modal" onclick={closeModalOnClickOutside}>
          <div class="modal-box relative">
            <label for="scoreboard-1" class="btn btn-sm btn-circle absolute right-2 top-2">✕</label>
            <Image
              src="/contest-history/images/1.jpg"
              alt="نتایج مسابقه شماره 1"
              width={1200}
              height={900}
              class="rounded-lg"
            />
          </div>
        </div>
      </div>
    </section>
  </article>
</PostLayout>
